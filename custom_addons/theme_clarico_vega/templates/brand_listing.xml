<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="brand_listing_template" inherit_id="emipro_theme_base.brand_listing_template"
        name="Brand Listing">
        <xpath expr="//div[@id='wrap']" position="inside">
            <div class="oe_structure oe_empty o_panel_body">
                <div class="featured-all-brands container">
                    <t t-set="brands"
                        t-value="request.env['product.brand'].sudo().search([('website_published','=', True),('website_id', 'in', (False,website.id))]).filtered(lambda r:r.products_count > 0)" />
                    <t t-if="brands"><!--Featured
                        Brand-->
                        <div class="ept_brands container">
                            <div class="row justify-content-between align-items-center">
                                <div class="col-auto">
                                    <h3 class="brand-title-main my-3 fw-normal">Our Brands</h3>
                                </div>
                                <div class="col-auto te_search position-relative">
                                    <input type="text" id="search_box" class="input-group"
                                        placeholder="Search Brand">
                                        <div class="input-group-append">
                                            <button type="button" id="close-button" class="btn">
                                                <i class="fa fa-search" />
                                            </button>
                                        </div>
                                    </input>
                                </div>
                            </div>
                            <div class="clearfix my-3 brand_listing_buttons">
                                <button type="button" id="all-brands"
                                    class="has-brands float-start text-center text-uppercase p-0">
                                    All
                                </button>
                                <!-- By Husin Sajjadi -->
                                <t t-set="persian_letters"
                                    t-value="['آ','ا','ب','پ','ت','ث','ج','چ','ح','خ','د','ذ','ر','ز','ژ','س','ش','ص','ض','ط','ظ','ع','غ','ف','ق','ک','گ','ل','م','ن','و','ه','ی']" />

                                <t t-foreach="persian_letters" t-as="letter" t-foreach-index="index">
                                    <a t-att-data-href="'#brand_fa_%s' % (index)"
                                        t-att-class="'has-brands active' if brands.filtered(lambda r: r.with_context(lang='fa_IR').name.startswith(letter)) else 'has-brands disabled'">
                                        <div class="brand-alpha">
                                            <t t-out="letter" />
                                        </div>
                                    </a>
                                </t>

                                <!-- <t t-foreach="range(97, 123)" t-as="i">
                                    <a t-att-data-href="'#brand_%s'%(chr(i))"
                                       t-att-class="'has-brands  active' if  brands.filtered(lambda
                                r:r.with_context(lang='en_US').name.startswith((chr(i) ,
                                chr(i).upper()))) else 'has-brands disabled'">
                                        <div class="brand-alpha">
                                            <t t-out="chr(i)"/>
                                        </div>
                                    </a>
                                </t> -->
                                <a t-att-data-href="'#brand_0'"
                                    t-att-class="'has-brands active' if  brands.filtered(lambda r:r.with_context(lang='en_US').name.startswith(('0','1','2','3','4','5','6','7','8','9'))) else 'has-brands disabled'">
                                    <div class="brand-alpha">0-9</div>
                                </a>
                            </div>
                        </div>
                        <div class="ept_brands_sticky_header container d-none">
                            <div class="align-items-center d-flex justify-content-center">
                                <div class="ept_brands_sticky_header_btns clearfix my-3">
                                    <button type="button" id="all-brands"
                                        class="has-brands float-start text-center text-uppercase p-0">
                                        All</button>
                                    <t t-foreach="range(97, 123)" t-as="i">
                                        <a t-att-data-href="'#brand_%s'%(chr(i))"
                                            t-att-class="'has-brands active' if  brands.filtered(lambda r:r.with_context(lang='en_US').name.startswith((chr(i) , chr(i).upper()))) else 'has-brands disabled'">
                                            <div class="brand-alpha">
                                                <t t-out="chr(i)" />
                                            </div>
                                        </a>
                                    </t>
                                    <a t-att-data-href="'#brand_0'"
                                        t-att-class="'has-brands active' if  brands.filtered(lambda r:r.with_context(lang='en_US').name.startswith(('0','1','2','3','4','5','6','7','8','9'))) else 'has-brands disabled'">
                                        <div class="brand-alpha">0-9</div>
                                    </a>
                                </div>
                                <div class="col-auto te_search">
                                    <input type="text" id="search_box" class="input-group"
                                        placeholder="Search Brand">
                                        <div class="input-group-append">
                                            <button type="button" id="close-button" class="btn">
                                                <i class="fa fa-search" />
                                            </button>
                                        </div>
                                    </input>
                                </div>
                            </div>
                        </div>
                        <div class="pt-4 my-3 brand-main container">
                            <!-- By Husin Sajjadi-->
                            <t t-foreach="persian_letters" t-as="letter" t-foreach-index="index">
                                <t t-set="fa_brands"
                                    t-value="brands.filtered(lambda r: r.with_context(lang='fa_IR').name.startswith(letter))" />
                                <div class="brand-alpha-main d-inline" t-if="fa_brands"
                                    t-att-id="'brand_fa_%s' % (index)">
                                    <t t-foreach="fa_brands" t-as="brand">
                                        <div class="item brand-item d-inline-block">
                                            <t t-set="brand_name_fa"
                                                t-value="brand.with_context(lang='fa_IR').name" />
                                            <t t-set="brand_name_en"
                                                t-value="brand.with_context(lang='en_US').name.replace(' ','-')" />
                                            <t t-set="brand_url"
                                                t-value="brand_name_en.replace('&amp;','and')" />
                                            <t t-set="page_url"
                                                t-value="'/shop/brands/%s-%s' %(brand_url, brand.id)" />

                                            <a t-att-href="page_url">
                                                <div class="brand-logo">
                                                    <img
                                                        t-attf-src="/web/image/product.brand/#{brand.id}/image_128"
                                                        t-att-alt="brand_name_fa"
                                                        t-att-title="brand_name_fa" />
                                                </div>
                                                <div class="py-2">
                                                    <span class="mr-1 brand-name text-break"
                                                        t-att-brand_name="brand_name_fa"
                                                        t-out="brand_name_fa" /> (<span class=""
                                                        t-out="brand.get_product_count()" />) </div>
                                            </a>

                                        </div>
                                    </t>
                                </div>
                            </t>

                            <!-- <t t-foreach="range(97, 123)" t-as="i">
                                <t t-set="alpha_brands"
                                    t-value="brands.filtered(lambda r:r.with_context(lang='en_US').name.startswith((chr(i) ,
                            chr(i).upper())))" />
                                <div class="brand-alpha-main d-inline" t-if="alpha_brands"
                                    t-att-id="'brand_%s'%(chr(i))">
                                    <t t-foreach="alpha_brands" t-as="brand">
                                        <div class="item brand-item d-inline-block">
                                            <t t-set="brand_name"
                                                t-value="brand.with_context(lang='en_US').name.replace(' ','-')" />
                                            <t t-set="brand_url"
                                                t-value="brand_name.replace('&amp;','and')" />
                                            <t t-set="page_url"
                                                t-value="'/shop/brands/%s-%s' %(brand_url, brand.id)" />
                                            <a t-att-href="page_url">
                                                <div class="brand-logo">
                                                    <img
                                                        t-attf-src="/web/image/product.brand/#{brand.id}/image_128"
                                                        t-att-alt="brand.with_context(lang='en_US').name"
                                                        t-att-title="brand.name" />
                                                </div>
                                                <div class="py-2">
                                                    <span class="mr-1 brand-name text-break"
                                                        t-att-brand_name="brand.with_context(lang='en_US').name"
                                                        t-out="brand.name" /> (<span class=""
                                                        t-out="brand.get_product_count()" />) </div>
                                            </a>
                                        </div>
                                    </t>
                                </div>
                            </t> -->
                            <t t-set="numeric_brands"
                                t-value="brands.filtered(lambda r:r.with_context(lang='en_US').name.startswith(('0','1','2','3','4','5','6','7','8','9')))" />
                            <div class="brand-alpha-main d-inline" t-if="numeric_brands"
                                t-att-id="'brand_0'">
                                <t t-foreach="numeric_brands" t-as="brand">
                                    <div class="item brand-item d-inline-block">
                                        <t t-set="brand_name"
                                            t-value="brand.with_context(lang='en_US').name.replace(' ','-')" />
                                        <t t-set="brand_url"
                                            t-value="brand_name.replace('&amp;','and')" />
                                        <t t-set="page_url"
                                            t-value="'/shop/brands/%s-%s' %(brand_url, brand.id)" />
                                        <a t-att-href="page_url">
                                            <div class="brand-logo">
                                                <img
                                                    t-attf-src="/web/image/product.brand/#{brand.id}/image_128"
                                                    t-att-alt="brand.with_context(lang='en_US').name"
                                                    t-att-title="brand.name" />
                                            </div>
                                            <div class="py-2">
                                                <span class="mr-1 brand-name text-break"
                                                    t-att-brand_name="brand.with_context(lang='en_US').name"
                                                    t-out="brand.name" /> (<span class=""
                                                    t-out="brand.products_count" />) </div>
                                        </a>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </t>
                    <t t-else="">
                        <h1>No Brand Found</h1>
                    </t>
                </div>
            </div>
        </xpath>
    </template>
    <record id="brand_listing_page" model="website.page">
        <field name="website_published">True</field>
        <field name="url">/brands</field>
        <field name="view_id" ref="emipro_theme_base.brand_listing_template" />
        <field name="track">True</field>
    </record>
</odoo>
